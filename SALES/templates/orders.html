{% extends "base.html" %}

{% block title %}訂單管理 - 業務部智慧化銷售系統{% endblock %}

{% block content %}
            <h1>訂單管理</h1>

            <!-- Add Order Form -->
            <div class="form-container">
                <h2>新增訂單</h2>
                <form action="{{ url_for('add_order') }}" method="POST">
                    <div class="form-group">
                        <label for="customer_id">客戶ID</label>
                        <input type="number" id="customer_id" name="customer_id" required>
                    </div>
                    <div class="form-group">
                        <label for="order_date">訂單日期</label>
                        <input type="date" id="order_date" name="order_date" required>
                    </div>
                    <div class="form-group">
                        <label for="amount">金額</label>
                        <input type="number" step="0.01" id="amount" name="amount" required>
                    </div>
                    <div class="form-group">
                        <label for="status">狀態</label>
                        <select id="status" name="status" required>
                            <option value="未付款">未付款</option>
                            <option value="已付款">已付款</option>
                            <option value="取消">取消</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">新增訂單</button>
                </form>
            </div>

            <!-- Orders Table -->
            <div class="search-container">
                <form action="{{ url_for('orders') }}" method="GET">
                    <input type="text" name="search" placeholder="搜尋訂單..." value="{{ search_query or '' }}">
                    <button type="submit" class="btn">搜尋</button>
                </form>
            </div>

            <h2>訂單列表</h2>
            <table>
                <thead>
                    <tr>
                        <th>訂單ID</th>
                        <th>客戶ID</th>
                        <th>客戶名稱</th>
                        <th>訂單日期</th>
                        <th>金額</th>
                        <th>狀態</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr>
                        <td>{{ order.id }}</td>
                        <td>{{ order.customer_id }}</td>
                        <td>{{ order.customer_name }}</td>
                        <td>{{ order.order_date }}</td>
                        <td>{{ order.amount }}</td>
                        <td>{{ order.status }}</td>
                        <td class="actions">
                            <a href="{{ url_for('edit_order', order_id=order.id) }}" class="btn btn-edit">修改</a>
                            <form action="{{ url_for('delete_order', order_id=order.id) }}" method="POST" style="display:inline;">
                                <button type="submit" class="btn btn-delete" onclick="return confirm('確定要刪除這筆訂單嗎？');">刪除</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
{% endblock %}