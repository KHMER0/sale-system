{% extends "base.html" %}

{% block title %}報價單管理 - 業務部智慧化銷售系統{% endblock %}

{% block content %}
            <h1>報價單管理</h1>

            <!-- Add Quote Form -->
            <div class="form-container">
                <h2>新增報價單</h2>
                <form action="{{ url_for('add_quote') }}" method="POST">
                    <div class="form-group">
                        <label for="customer_id">客戶ID</label>
                        <input type="number" id="customer_id" name="customer_id" required>
                    </div>
                    <div class="form-group">
                        <label for="quote_date">報價日期</label>
                        <input type="date" id="quote_date" name="quote_date" required>
                    </div>
                    <div class="form-group">
                        <label for="amount">金額</label>
                        <input type="number" step="0.01" id="amount" name="amount" required>
                    </div>
                    <div class="form-group">
                        <label for="status">狀態</label>
                        <select id="status" name="status" required>
                            <option value="草稿">草稿</option>
                            <option value="已發送">已發送</option>
                            <option value="已接受">已接受</option>
                            <option value="已拒絕">已拒絕</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">新增報價單</button>
                </form>
            </div>

            <!-- Search Form -->
            <div class="search-container">
                <form action="{{ url_for('quotes') }}" method="GET">
                    <input type="text" name="search" placeholder="搜尋報價單..." value="{{ search_query or '' }}">
                    <button type="submit" class="btn">搜尋</button>
                </form>
            </div>

            <!-- Quotes Table -->
            <h2>報價單列表</h2>
            <table>
                <thead>
                    <tr>
                        <th>報價單ID</th>
                        <th>客戶ID</th>
                        <th>客戶名稱</th>
                        <th>報價日期</th>
                        <th>金額</th>
                        <th>狀態</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    {% for quote in quotes %}
                    <tr>
                        <td>{{ quote.id }}</td>
                        <td>{{ quote.customer_id }}</td>
                        <td>{{ quote.customer_name }}</td>
                        <td>{{ quote.quote_date }}</td>
                        <td>{{ quote.amount }}</td>
                        <td>{{ quote.status }}</td>
                        <td class="actions">
                            <a href="{{ url_for('edit_quote', quote_id=quote.id) }}" class="btn btn-edit">修改</a>
                            <form action="{{ url_for('delete_quote', quote_id=quote.id) }}" method="POST" style="display:inline;">
                                <button type="submit" class="btn btn-delete" onclick="return confirm('確定要刪除這張報價單嗎？');">刪除</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
{% endblock %}